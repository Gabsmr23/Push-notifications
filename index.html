<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Push notifications</title>
    </head>
    <body>
        <h1> Push notification </h1>
        <script>
            navigator.serviceWorker.register("sw.js");

            function enableNotif() {
                Notification.requestPermission().then((permission)=> {
                    if(permission === 'granted') {
                         //get service worker
                         navigator.serviceWorker.ready.then((sw)=> {
                            //subscribe
                            sw.pushManager.subscribe({
                                userVisibleOnly: true,
                                applicationServerKey: "BHNWRk10UuGWhg88klGXTTZF4ZBz9m5oU4a5NGvTUGaCyqbpygGN1vefICCdbyqW7vtskucow9co-SfVCXbuczg"
                            }).then((subscription)=> {
                                console.log(JSON.stringify(subscription));
                            });
                         });
                    }
                });
            }
        </script>
        <button onclick="enableNotif()"> Enable notification </button>
    </body>
</html>